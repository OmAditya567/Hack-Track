<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>hack2travel - Kerala Planner</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // --- API KEY & MOCK DATA ---
        /*
         * ‚ùóÔ∏è‚ùóÔ∏è‚ùóÔ∏è IMPORTANT ‚ùóÔ∏è‚ùóÔ∏è‚ùóÔ∏è
         * To make the Weather Widget work, you need to get a FREE API key from OpenWeatherMap.
         * 1. Go to https://openweathermap.org/appid
         * 2. Sign up and get your key.
         * 3. Replace the placeholder 'YOUR_API_KEY_HERE' below with your actual key.
         */
        const API_KEY = 'a7203ef8bd8e46a9bf5145019250609'; 

        const destinations = {
            'kerala': {
                name: 'Kerala, India',
                description: 'Often called "God\'s Own Country", Kerala is a serene paradise known for its palm-lined beaches, tranquil backwaters, lush tea plantations, and vibrant cultural traditions like Kathakali and Theyyam.',
                images: [
                    'https://images.unsplash.com/photo-1602216056096-3b40cc0c9944?q=80&w=2070&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1593693397640-05247e33734a?q=80&w=2070&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1588623692369-993b2539a291?q=80&w=2070&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1616191122373-6c61f385c5a7?q=80&w=1974&auto=format&fit=crop',
                    'https://images.unsplash.com/photo-1579751626652-59842a2353a2?q=80&w=1974&auto=format&fit=crop'
                ],
                mostVisited: { name: 'Alleppey (Alappuzha) Backwaters', icon: 'üõ∂', details: 'Experience the heart of Kerala by cruising its enchanting backwaters on a traditional houseboat. It\'s an unforgettable journey through a network of lakes, canals, and lagoons.' },
                attractions: [
                    { name: 'Munnar Tea Gardens', icon: 'üçÉ', details: 'Wander through emerald-green tea estates covering rolling hills.', coords: [10.0892, 77.0595], reviews: [{name: 'Rohan', rating: 5, comment: 'Breathtakingly beautiful!'}, {name: 'Priya', rating: 4, comment: 'A must-visit for nature lovers.'}] },
                    { name: 'Fort Kochi', icon: 'üï∏Ô∏è', details: 'Historic area with iconic Chinese fishing nets and colonial architecture.', coords: [9.9656, 76.2425], reviews: [{name: 'Alisha', rating: 5, comment: 'Loved the vibe and the history.'}] },
                    { name: 'Periyar National Park, Thekkady', icon: 'üêò', details: 'A wildlife sanctuary famous for elephants, tigers, and spice plantations.', coords: [9.4678, 77.1444], reviews: [{name: 'David', rating: 4, comment: 'Saw elephants by the lake!'}, {name: 'Sunita', rating: 4, comment: 'The boat ride was amazing.'}] },
                    { name: 'Varkala Beach', icon: 'üèñÔ∏è', details: 'A stunning cliffside beach offering panoramic views of the Arabian Sea.', coords: [8.7383, 76.7161], reviews: [{name: 'Chloe', rating: 5, comment: 'The cliff view is unreal.'}] },
                    { name: 'Edakkal Caves, Wayanad', icon: 'üèûÔ∏è', details: 'Prehistoric caves with ancient petroglyphs, offering a trek back in time.', coords: [11.6214, 76.2361], reviews: [{name: 'Arjun', rating: 4, comment: 'The trek up is worth it for the history.'}] },
                    { name: 'Chembra Peak, Wayanad', icon: '‚õ∞Ô∏è', details: 'Trek to the stunning heart-shaped lake near the top of Wayanad\'s highest peak.', coords: [11.5222, 76.0833], reviews: [{name: 'Vikram', rating: 5, comment: 'A challenging but rewarding trek.'}] }
                ],
                restaurants: [
                    { name: 'Paragon, Kozhikode', type: 'üå∂Ô∏è Malabar Cuisine', details: 'A legendary restaurant famous for its authentic Malabar Biryani.', coords: [11.2588, 75.7804], reviews: [{name: 'Zain', rating: 5, comment: 'Best biryani I have ever had, period.'}, {name: 'Maria', rating: 5, comment: 'An absolute must-visit.'}] },
                    { name: 'Villa Maya, Trivandrum', type: 'üèõÔ∏è Fine Dining', details: 'A restored 18th-century Dutch manor serving exquisite Indian and continental cuisine.', coords: [8.4819, 76.9431], reviews: [{name: 'James', rating: 5, comment: 'Incredible ambiance and food.'}] },
                    { name: 'Grand Pavilion, Kochi', type: 'üè® Classic Keralan', details: 'Known for its Syrian Christian delicacies and old-world charm.', coords: [9.9816, 76.2999], reviews: [{name: 'Anjali', rating: 4, comment: 'Authentic Kerala food. Great taste.'}] },
                    { name: 'Dhe Puttu, Kochi', type: 'üçö Puttu Specialist', details: 'Celebrity-owned restaurant serving a wide variety of "puttu" (steamed rice cake).', coords: [9.9976, 76.2974], reviews: [{name: 'Sam', rating: 4, comment: 'So many varieties of puttu to try!'}] },
                    { name: 'Kayees Rahmathulla Cafe, Kochi', type: 'üçö Biryani', details: 'An iconic eatery renowned for its delicious and aromatic mutton biryani.', coords: [9.9650, 76.2570], reviews: [{name: 'Faisal', rating: 5, comment: 'The biryani is legendary for a reason.'}] }
                ],
                hiddenGems: [
                    { name: 'Marari Beach', icon: 'üå¥', details: 'A quiet and pristine beach, perfect for relaxation away from the crowds.', coords: [9.5941, 76.3216] },
                    { name: 'Vagamon', icon: 'üå≤', details: 'A sleepy hill station with pine forests, meadows, and cascading waterfalls.', coords: [9.6845, 76.9033] },
                    { name: 'Kolukkumalai Tea Estate', icon: 'üåÑ', details: 'The world\'s highest organic tea plantation, offering breathtaking sunrise views.', coords: [9.9679, 77.1065] },
                    { name: 'Poovar Island', icon: 'üèùÔ∏è', details: 'A beautiful estuary where a river, lake, and the sea meet, creating a unique ecosystem.', coords: [8.3150, 77.0700] },
                    { name: 'Silent Valley National Park', icon: 'ü¶ã', details: 'A pristine, untouched rainforest, core of the Nilgiri Biosphere Reserve.', coords: [11.1309, 76.4326]},
                    { name: 'Kerala Folklore Museum', icon: 'üèõÔ∏è', details: 'A treasure trove of architectural and cultural artifacts in Kochi.', coords: [9.9328, 76.3033]}
                ],
                activityPool: {
                    'Kochi': [ { text: 'Explore Fort Kochi & Chinese Fishing Nets.', tags: ['Culture', 'History', 'Photography'] }, { text: 'Visit Mattancherry Palace & Paradesi Synagogue.', tags: ['History', 'Culture'] }, { text: 'Stroll through Jew Town for antiques.', tags: ['Shopping', 'Culture', 'History'] }, { text: 'Watch a Kathakali dance performance.', tags: ['Art & Music', 'Culture'] }, { text: 'Discover the street art of Fort Kochi.', tags: ['Art & Music', 'Photography', 'Culture'] }, { text: 'Go on a culinary tour of local eateries.', tags: ['Foodie', 'Culture'] }, { text: 'Shop for spices and souvenirs at Broadway.', tags: ['Shopping', 'Foodie'] }, { text: 'Visit the Kerala Folklore Museum.', tags: ['History', 'Culture', 'Art & Music'], isGem: true }, { text: 'Witness Onam or Christmas celebrations (seasonal).', tags: ['Festivals', 'Culture'] } ],
                    'Munnar': [ { text: 'Walk through tea plantations & visit a museum.', tags: ['Nature', 'Relaxation', 'Photography'] }, { text: 'Visit Top Station for panoramic views.', tags: ['Nature', 'Trekking', 'Photography'] }, { text: 'Explore Eravikulam National Park (Nilgiri Tahr).', tags: ['Wildlife', 'Nature', 'Adventure'] }, { text: 'See Mattupetty Dam and enjoy a boat ride.', tags: ['Nature', 'Relaxation'] }, { text: 'Take a Jeep safari to Kolukkumalai Tea Estate.', tags: ['Adventure', 'Nature', 'Photography', 'Trekking'], isGem: true }, { text: 'Go bird watching at the Salim Ali Bird Sanctuary.', tags: ['Wildlife', 'Nature'] }, { text: 'Enjoy a peaceful Shikara ride on Kundala Lake.', tags: ['Relaxation', 'Nature'] }, { text: 'Buy fresh tea and local spices.', tags: ['Shopping', 'Foodie'] } ],
                    'Thekkady': [ { text: 'Take a boat safari on Periyar Lake.', tags: ['Wildlife', 'Nature', 'Adventure'] }, { text: 'Go on a guided spice plantation tour.', tags: ['Foodie', 'Culture', 'Nature'] }, { text: 'Watch a Kalaripayattu martial arts show.', tags: ['Adventure', 'Culture'] }, { text: 'Discover the misty hills and meadows of Vagamon.', tags: ['Nature', 'Relaxation', 'Trekking', 'Photography'], isGem: true }, { text: 'Take a Keralan cuisine cooking class.', tags: ['Foodie', 'Culture'] }, { text: 'Participate in a night patrol in the jungle.', tags: ['Adventure', 'Wildlife'] }, { text: 'Hike through Silent Valley National Park.', tags: ['Wildlife', 'Nature', 'Trekking', 'Adventure'], isGem: true }, { text: 'Learn about medicinal plants and Ayurveda.', tags: ['Ayurveda', 'Nature'] } ],
                    'Alleppey': [ { text: 'Spend a day/night on a traditional houseboat.', tags: ['Relaxation', 'Culture', 'Nature'] }, { text: 'Enjoy authentic Keralan meals on the boat.', tags: ['Foodie', 'Culture'] }, { text: 'Witness village life along the backwaters.', tags: ['Culture', 'Photography'] }, { text: 'Unwind on the pristine sands of Marari Beach.', tags: ['Beaches', 'Relaxation', 'Photography'], isGem: true }, { text: 'Explore the backwaters by kayak.', tags: ['Adventure', 'Nature'] }, { text: 'Relax and watch the sunset over the water.', tags: ['Relaxation', 'Photography'] }, { text: 'Watch a snake boat race (seasonal).', tags: ['Festivals', 'Adventure', 'Culture'] }, { text: 'Stay at an Ayurveda and wellness retreat.', tags: ['Ayurveda', 'Relaxation', 'Spirituality'] } ],
                    'Varkala/Kovalam': [ { text: 'Relax on the cliffside Varkala or Kovalam beaches.', tags: ['Beaches', 'Relaxation'] }, { text: 'Visit the Janardhana Swamy Temple.', tags: ['Spirituality', 'Culture'] }, { text: 'Enjoy swimming, sunbathing, and watersports.', tags: ['Beaches', 'Adventure'] }, { text: 'Experience a rejuvenating Ayurvedic massage.', tags: ['Ayurveda', 'Relaxation'] }, { text: 'Try surfing or stand-up paddleboarding.', tags: ['Adventure', 'Beaches'] }, { text: 'Practice yoga at a cliffside wellness center.', tags: ['Spirituality', 'Relaxation', 'Ayurveda'] }, { text: 'Explore the unique Poovar Island estuary.', tags: ['Nature', 'Beaches', 'Relaxation'], isGem: true }, { text: 'Visit Napier Museum & Zoo in nearby Trivandrum.', tags: ['History', 'Art & Music', 'Wildlife', 'Culture'] } ],
                    'Wayanad': [ { text: 'Trek to Chembra Peak and see the heart-shaped lake.', tags: ['Trekking', 'Nature', 'Adventure', 'Photography'] }, { text: 'Explore the prehistoric Edakkal Caves.', tags: ['History', 'Adventure', 'Trekking'] }, { text: 'Visit the stunning Soochipara Waterfalls.', tags: ['Nature', 'Adventure', 'Relaxation', 'Photography'] }, { text: 'Go boating at the serene Pookode Lake.', tags: ['Nature', 'Relaxation'] }, { text: 'Visit a local tribal village to learn their heritage.', tags: ['Culture', 'History'] }, { text: 'Witness a Theyyam performance (seasonal).', tags: ['Festivals', 'Culture', 'Spirituality', 'Photography'] }, { text: 'Shop for local honey and handicrafts.', tags: ['Shopping', 'Foodie'] }, { text: 'Watch a Mohiniyattam dance recital.', tags: ['Art & Music', 'Culture', 'Festivals'] } ]
                },
                emergencyInfo: { general: '112', police: '100', ambulance: '102', fire: '101', disasterManagement: '1077' },
                packingList: { 'Essentials': ['Passport/ID', 'Visa', 'Tickets', 'Cash/Cards', 'Phone & Charger'], 'Clothing': ['Light Cottons', 'Swimwear', 'Rain Jacket', 'Shawl/Jacket', 'Modest Clothes (Temples)'], 'Footwear': ['Sandals/Flip-flops', 'Walking Shoes', 'Water Shoes'], 'Health': ['First-Aid Kit', 'Insect Repellent', 'Sunscreen', 'Hand Sanitizer', 'Personal Meds'], 'Miscellaneous': ['Power Bank', 'Universal Adapter', 'Camera', 'Water Bottle', 'Sunglasses'] }
            }
        };
        const translations = { 'hello': 'Namaskaram', 'thank you': 'Nandi', 'yes': 'Athe', 'no': 'Illa', 'how much?': 'Ethrayanu?', 'water': 'Vellam', 'food': 'Bhaskhanam', 'goodbye': 'Pinne kaanam' };
        const interests = ['Adventure', 'Beaches', 'Culture', 'Foodie', 'History', 'Nature', 'Relaxation', 'Wildlife', 'Spirituality', 'Shopping', 'Trekking', 'Ayurveda', 'Art & Music', 'Festivals', 'Photography'];
        
        const generateItinerary = (activityPool, days, selectedInterests) => {
            const itinerary = [];
            const allLocations = Object.keys(activityPool);
            let customRoute = [];
            if (selectedInterests.length === 0) {
                customRoute = ['Kochi', 'Munnar', 'Thekkady', 'Alleppey', 'Varkala/Kovalam', 'Wayanad'];
            } else {
                const scoredLocations = allLocations.map(location => {
                    const activities = activityPool[location];
                    const locationScore = activities.reduce((totalScore, activity) => totalScore + activity.tags.reduce((score, tag) => score + (selectedInterests.includes(tag) ? 1 : 0), 0), 0);
                    return { location, score: locationScore };
                }).filter(item => item.score > 0).sort((a, b) => b.score - a.score);
                customRoute = scoredLocations.map(item => item.location);
                const remainingLocations = allLocations.filter(loc => !customRoute.includes(loc));
                customRoute = [...customRoute, ...remainingLocations];
            }
            const dayAllocation = {};
            for (let i = 0; i < days; i++) {
                const locationForDay = customRoute[i % customRoute.length];
                dayAllocation[locationForDay] = (dayAllocation[locationForDay] || 0) + 1;
            }
            let dayCounter = 1;
            for (const location of customRoute) {
                if (dayAllocation[location]) {
                    const numDaysInLocation = dayAllocation[location];
                    for (let i = 0; i < numDaysInLocation; i++) {
                        if (dayCounter > days) break;
                        const allActivitiesForLocation = activityPool[location] || [];
                        let chosenActivitiesText = ["Relax and explore the local area."];
                        if (allActivitiesForLocation.length > 0) {
                            const sortedActivities = allActivitiesForLocation
                                .map(activity => ({ ...activity, score: activity.tags.reduce((acc, tag) => acc + (selectedInterests.includes(tag) ? 1 : 0), 0) + (activity.isGem && selectedInterests.length > 0 ? 1 : 0) }))
                                .sort((a, b) => b.score - a.score);
                            const activityOffset = i * 3;
                            chosenActivitiesText = sortedActivities.slice(activityOffset, activityOffset + 3).map(a => a.text);
                            if(chosenActivitiesText.length === 0) chosenActivitiesText = sortedActivities.slice(0, 3).map(a => a.text);
                        }
                       itinerary.push({ day: `Day ${dayCounter}: ${location}`, activities: chosenActivitiesText.length > 0 ? chosenActivitiesText : ["Relax and explore the local area."] });
                       dayCounter++;
                    }
                }
            }
            return itinerary;
        };
        
        function PhotoGallery({ images }) {
            const [currentIndex, setCurrentIndex] = React.useState(0);
            const goToPrevious = () => { const isFirstSlide = currentIndex === 0; const newIndex = isFirstSlide ? images.length - 1 : currentIndex - 1; setCurrentIndex(newIndex); };
            const goToNext = () => { const isLastSlide = currentIndex === images.length - 1; const newIndex = isLastSlide ? 0 : currentIndex + 1; setCurrentIndex(newIndex); };
            return (
                <div className="h-full w-full relative group">
                    <div style={{ backgroundImage: `url(${images[currentIndex]})`}} className="w-full h-full rounded-xl bg-center bg-cover duration-500"></div>
                    <div onClick={goToPrevious} className="hidden group-hover:block absolute top-[50%] -translate-y-[-50%] left-5 text-2xl rounded-full p-2 bg-black/20 text-white cursor-pointer">‚ùÆ</div>
                    <div onClick={goToNext} className="hidden group-hover:block absolute top-[50%] -translate-y-[-50%] right-5 text-2xl rounded-full p-2 bg-black/20 text-white cursor-pointer">‚ùØ</div>
                    <div className="flex top-4 justify-center py-2 absolute bottom-4 left-0 right-0">
                        {images.map((_, slideIndex) => (
                            <div key={slideIndex} onClick={() => setCurrentIndex(slideIndex)} className={`text-2xl cursor-pointer transition-all mx-1 ${currentIndex === slideIndex ? 'text-white' : 'text-white/50'}`}>‚óè</div>
                        ))}
                    </div>
                </div>
            );
        }

        function LoadingSpinner() {
            return (
                <div className="flex justify-center items-center h-full">
                    <svg className="animate-spin h-10 w-10 text-indigo-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                        <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                </div>
            );
        }

        const getWeatherEmoji = (weather) => {
            if (!weather || !weather.weather[0]) return 'üåç';
            const id = weather.weather[0].id;
            if (id >= 200 && id < 300) return '‚õàÔ∏è'; // Thunderstorm
            if (id >= 300 && id < 400) return 'üå¶Ô∏è'; // Drizzle
            if (id >= 500 && id < 600) return 'üåßÔ∏è'; // Rain
            if (id >= 600 && id < 700) return '‚ùÑÔ∏è'; // Snow
            if (id >= 700 && id < 800) return 'üå´Ô∏è'; // Atmosphere (Fog, Mist)
            if (id === 800) return '‚òÄÔ∏è'; // Clear
            if (id === 801) return 'üå§Ô∏è'; // Few clouds
            if (id === 802) return '‚òÅÔ∏è'; // Scattered clouds
            if (id > 802) return 'üå•Ô∏è'; // Broken/overcast clouds
            return 'üåç'; // Default
        };

        function WeatherWidget({ location }) {
            const { useState, useEffect } = React;
            const [weather, setWeather] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [error, setError] = useState(null);
            
            useEffect(() => {
                if (!location || API_KEY === 'YOUR_API_KEY_HERE') { 
                    setError({ message: "API key not configured."}); 
                    setIsLoading(false); 
                    return; 
                };
                setIsLoading(true);
                fetch(`https://api.openweathermap.org/data/2.5/weather?q=${location},IN&appid=${API_KEY}&units=metric`)
                    .then(response => { if (!response.ok) throw new Error('Weather data not available.'); return response.json(); })
                    .then(data => { setWeather(data); setIsLoading(false); })
                    .catch(error => { setError(error); setIsLoading(false); });
            }, [location]);

            const renderContent = () => {
                if (isLoading) return <p className="text-sm">Loading weather...</p>;
                if (error) return <p className="text-sm text-amber-600 dark:text-amber-500">Weather unavailable</p>;
                if (!weather) return null;
                
                return (
                    <div className="flex items-center gap-3">
                        <span className="text-2xl">{getWeatherEmoji(weather)}</span>
                        <div className="flex flex-col text-sm">
                           <span className="font-semibold">{Math.round(weather.main.temp)}¬∞C</span>
                           <span className="text-xs capitalize">{weather.weather[0].description}</span>
                        </div>
                    </div>
                );
            };
            return <div className="mt-4 pt-4 border-t border-black/10 dark:border-white/10">{renderContent()}</div>
        }
        
        function MapComponent({ places }) {
            const mapRef = React.useRef(null);
            React.useEffect(() => {
                if (mapRef.current === null) {
                    mapRef.current = L.map('map-container').setView([10.8505, 76.2711], 7);
                    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                        attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
                    }).addTo(mapRef.current);
                }
                const markers = L.layerGroup();
                places.forEach(place => {
                    if (place.coords) {
                        const popupContent = `
                            <div style="font-family: Inter, sans-serif; text-align: center;">
                                <strong style="font-size: 1.1em;">${place.name}</strong>
                                <br/>
                                <a href="https://www.google.com/maps/dir/?api=1&destination=${place.coords[0]},${place.coords[1]}" target="_blank" rel="noopener noreferrer" style="color: #4f46e5; font-weight: 600; text-decoration: none; font-size: 0.9em; display: inline-block; margin-top: 5px;">
                                    Get Directions ‚Üí
                                </a>
                            </div>`;
                        L.marker(place.coords).bindPopup(popupContent).addTo(markers);
                    }
                });
                markers.addTo(mapRef.current);
                return () => { markers.clearLayers(); };
            }, [places]);
            return <div id="map-container" className="shadow-lg" style={{ height: '400px', width: '100%', borderRadius: '12px', zIndex: 0 }}></div>;
        }
        
        function StarRating({ rating }) {
            const totalStars = 5;
            const fullStars = Math.floor(rating);
            const emptyStars = totalStars - fullStars;
            return (
                <div className="flex items-center">
                    {[...Array(fullStars)].map((_, i) => <svg key={`full-${i}`} className="w-4 h-4 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>)}
                    {[...Array(emptyStars)].map((_, i) => <svg key={`empty-${i}`} className="w-4 h-4 text-gray-300 dark:text-gray-600" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" /></svg>)}
                </div>
            );
        }

        function App() {
            const { useState, useEffect } = React;
            const [view, setView] = useState('search');
            const [isLoading, setIsLoading] = useState(false);
            const [theme, setTheme] = useState('light');
            const [tripData, setTripData] = useState(null);
            const [searchInput, setSearchInput] = useState('');
            const [daysInput, setDaysInput] = useState('');
            const [selectedInterests, setSelectedInterests] = useState([]);
            const [errorMessage, setErrorMessage] = useState('');
            const [expenses, setExpenses] = useState([]);
            const [numberOfPeople, setNumberOfPeople] = useState(1);
            const [expenseDesc, setExpenseDesc] = useState('');
            const [expenseAmount, setExpenseAmount] = useState('');
            const [activeTab, setActiveTab] = useState('itinerary');
            const [savedTripExists, setSavedTripExists] = useState(false);
            const [saveButtonText, setSaveButtonText] = useState('Save Trip');
            
            const cardColors = [
                "bg-sky-50 border-sky-200 dark:bg-sky-900/50 dark:border-sky-800",
                "bg-emerald-50 border-emerald-200 dark:bg-emerald-900/50 dark:border-emerald-800",
                "bg-rose-50 border-rose-200 dark:bg-rose-900/50 dark:border-rose-800",
                "bg-amber-50 border-amber-200 dark:bg-amber-900/50 dark:border-amber-800",
                "bg-violet-50 border-violet-200 dark:bg-violet-900/50 dark:border-violet-800",
                "bg-lime-50 border-lime-200 dark:bg-lime-900/50 dark:border-lime-800",
            ];

            useEffect(() => { const savedTrip = localStorage.getItem('savedHack2TravelTrip'); setSavedTripExists(!!savedTrip); }, []);
            useEffect(() => { const savedTheme = localStorage.getItem('theme'); const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches; if (savedTheme === 'dark' || (!savedTheme && prefersDark)) { document.documentElement.classList.add('dark'); setTheme('dark'); } else { document.documentElement.classList.remove('dark'); setTheme('light'); } }, []);
            
            const toggleTheme = () => { const newTheme = theme === 'light' ? 'dark' : 'light'; setTheme(newTheme); localStorage.setItem('theme', newTheme); document.documentElement.classList.toggle('dark'); };
            const handleInterestClick = (interest) => { setSelectedInterests(prev => prev.includes(interest) ? prev.filter(i => i !== interest) : [...prev, interest]); };
            
            const handleSearchSubmit = (e) => {
                e.preventDefault();
                const query = searchInput.trim().toLowerCase();
                const destination = destinations[query];
                if (destination && daysInput > 0) {
                    setIsLoading(true);
                    setErrorMessage('');
                    setTimeout(() => {
                        setTripData({ ...destination, itinerary: generateItinerary(destination.activityPool, parseInt(daysInput, 10), selectedInterests) });
                        setActiveTab('itinerary');
                        setView('destination');
                        setIsLoading(false);
                    }, 800);
                } else { setErrorMessage('Please enter "Kerala" and a valid number of days to begin.'); }
            };

            const handleBackToSearch = () => { setView('search'); setTripData(null); setSearchInput(''); setDaysInput(''); setSelectedInterests([]); setExpenses([]); setNumberOfPeople(1); setSaveButtonText('Save Trip'); };
            const addExpense = () => { const amount = parseFloat(expenseAmount); if (expenseDesc && !isNaN(amount) && amount > 0) { setExpenses([...expenses, { description: expenseDesc, amount }]); setExpenseDesc(''); setExpenseAmount(''); } };
            const deleteExpense = (indexToDelete) => { setExpenses(expenses.filter((_, index) => index !== indexToDelete)); };
            const totalAmount = expenses.reduce((sum, exp) => sum + exp.amount, 0);
            const perPersonAmount = totalAmount / (numberOfPeople || 1);

            const handleSaveTrip = () => {
                const dataToSave = { tripData, daysInput, selectedInterests, expenses, numberOfPeople, activeTab };
                localStorage.setItem('savedHack2TravelTrip', JSON.stringify(dataToSave));
                setSaveButtonText('Trip Saved!');
                setSavedTripExists(true);
                setTimeout(() => setSaveButtonText('Save Trip'), 2000);
            };
            const handleLoadTrip = () => {
                const savedData = JSON.parse(localStorage.getItem('savedHack2TravelTrip'));
                if (savedData) {
                    setIsLoading(true);
                    setTimeout(() => {
                        setTripData(savedData.tripData);
                        setDaysInput(savedData.daysInput);
                        setSelectedInterests(savedData.selectedInterests);
                        setExpenses(savedData.expenses || []);
                        setNumberOfPeople(savedData.numberOfPeople || 1);
                        setActiveTab(savedData.activeTab || 'itinerary');
                        setView('destination');
                        setIsLoading(false);
                    }, 800);
                }
            };
            const handleClearTrip = () => {
                localStorage.removeItem('savedHack2TravelTrip');
                setSavedTripExists(false);
            };

            return (
                <div className="min-h-screen flex flex-col bg-gray-50 dark:bg-black text-gray-800 dark:text-gray-200">
                    <style>{`
                        :root { --card-bg: white; --card-border: #e5e7eb; --text-primary: #1f2937; --text-secondary: #6b7280; }
                        .dark { --card-bg: #1f2937; --card-border: #374151; --text-primary: #f9fafb; --text-secondary: #9ca3af; }
                        
                        body { font-family: 'Inter', sans-serif; }
                        .hero-bg { background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://images.unsplash.com/photo-1602216056096-3b40cc0c9944?q=80&w=2070&auto=format&fit=crop'); background-size: cover; background-position: center; }
                        
                        @keyframes deal-in-animation {
                            from { opacity: 0; transform: translateY(100px) scale(0.6) rotate(10deg); }
                            to { opacity: 1; transform: translateY(0) scale(1) rotate(0deg); }
                        }
                        
                        @keyframes pulse { 0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(167, 139, 250, 0.7); } 50% { transform: scale(1.03); box-shadow: 0 0 0 10px rgba(167, 139, 250, 0); } }
                        
                        .initial-hidden { opacity: 0; }
                        .card-animation { animation: deal-in-animation 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; }

                        .interest-tag.selected { background-color: #6366f1; color: white; }
                        .header-logo { height: 48px; width: 48px; margin-right: 12px; }
                        .app-title { font-family: 'Poppins', sans-serif; font-weight: 700; font-size: 1.75rem; background-image: linear-gradient(to right, #4f46e5, #a855f7); color: transparent; -webkit-background-clip: text; background-clip: text; }
                        .dark .app-title { background-image: linear-gradient(to right, #818cf8, #c084fc); }
                        
                        .tab-button { padding: 12px 16px; font-weight: 600; color: var(--text-secondary); border-bottom: 3px solid transparent; transition: all 0.2s; }
                        .tab-button.active { color: #4f46e5; border-bottom-color: #4f46e5; }
                        .dark .tab-button.active { color: #a5b4fc; border-bottom-color: #a5b4fc; }

                        .colored-card { border-width: 1px; transition: transform 0.2s ease-out, box-shadow 0.2s ease-out; }
                        .colored-card:hover { transform: translateY(-5px); box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -2px rgba(0,0,0,0.05); }
                        .dark .colored-card:hover { box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.2), 0 4px 6px -2px rgba(99, 102, 241, 0.1); }
                        
                        .custom-checkbox input[type="checkbox"] { display: none; }
                        .custom-checkbox label { cursor: pointer; display: flex; align-items: center; }
                        .custom-checkbox .checkbox-box { width: 20px; height: 20px; border: 2px solid #9ca3af; border-radius: 4px; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s, border-color 0.2s; }
                        .custom-checkbox .checkbox-box svg { opacity: 0; transform: scale(0.5); transition: opacity 0.2s, transform 0.2s; }
                        .custom-checkbox input[type="checkbox"]:checked + label .checkbox-box { background-color: #6366f1; border-color: #6366f1; }
                        .custom-checkbox input[type="checkbox"]:checked + label .checkbox-box svg { opacity: 1; transform: scale(1); }
                        .custom-checkbox input[type="checkbox"]:checked + label .checkbox-label { text-decoration: line-through; color: #9ca3af; }
                        .dark .custom-checkbox input[type="checkbox"]:checked + label .checkbox-label { color: #6b7280; }
                    `}</style>
                    <header className="bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm shadow-md sticky top-0 z-20">
                        <div className="container mx-auto px-6 py-3 flex justify-between items-center">
                            <div className="flex items-center">
                                <img src="https://i.imgur.com/Sb5E51w.png" alt="hack2travel Logo" className="header-logo" />
                                <span className="app-title">hack2travel</span>
                            </div>
                            <button onClick={toggleTheme} className="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                                {theme === 'light' ? <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg> : <svg className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg> }
                            </button>
                        </div>
                    </header>
                    <main className="flex-grow">
                        {isLoading ? <div className="h-[80vh] flex items-center justify-center"><LoadingSpinner /></div> : view === 'search' ? (
                            <section className="hero-bg text-white h-auto min-h-[80vh] py-16 flex flex-col justify-center items-center text-center p-6">
                                <div className="initial-hidden card-animation">
                                    <h2 className="text-4xl md:text-5xl font-bold mb-4 text-shadow-lg">Plan Your Perfect Kerala Trip</h2>
                                    <p className="text-lg md:text-xl mb-8 max-w-2xl">Enter "Kerala", select your interests, and tell us how long you're staying. We'll handle the rest!</p>
                                </div>
                                <form onSubmit={handleSearchSubmit} className="w-full max-w-xl flex flex-col gap-4 initial-hidden card-animation" style={{animationDelay: '0.2s'}}>
                                    <input type="text" value={searchInput} onChange={(e) => setSearchInput(e.target.value)} placeholder="Enter 'Kerala'" className="w-full p-4 text-gray-900 rounded-lg shadow-lg focus:ring-4 focus:ring-indigo-400 transition" required />
                                    <div className="bg-black/20 backdrop-blur-sm p-4 rounded-lg">
                                        <label className="block text-white text-center font-semibold mb-3">Select Your Interests</label>
                                        <div className="flex flex-wrap justify-center gap-2">{interests.map(interest => (<button key={interest} type="button" onClick={() => handleInterestClick(interest)} className={`interest-tag bg-white/20 hover:bg-white/40 text-white font-medium py-2 px-4 rounded-full transition-all duration-200 ${selectedInterests.includes(interest) ? 'selected' : ''}`}>{interest}</button>))}</div>
                                    </div>
                                    <input type="number" value={daysInput} onChange={(e) => setDaysInput(e.target.value)} min="1" placeholder="Number of days" className="w-full p-4 text-gray-900 rounded-lg shadow-lg focus:ring-4 focus:ring-indigo-400 transition" required />
                                    <button type="submit" className="w-full p-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg hover:from-indigo-700 hover:to-purple-700 font-semibold text-lg flex items-center justify-center gap-2 transition-all transform hover:scale-105" style={{animation: 'pulse 2.5s infinite'}}>
                                        <span>Plan My Trip</span>
                                        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                                    </button>
                                </form>
                                {errorMessage && <p className="text-red-400 mt-4 font-semibold">{errorMessage}</p>}
                                {savedTripExists && (
                                    <div className="mt-8 bg-white/10 backdrop-blur-sm p-4 rounded-lg flex items-center justify-between w-full max-w-xl initial-hidden card-animation" style={{animationDelay: '0.4s'}}>
                                        <div><p className="font-semibold">You have a saved trip.</p></div>
                                        <div className="flex gap-2">
                                            <button onClick={handleLoadTrip} className="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 font-semibold transition-colors">Load Trip</button>
                                            <button onClick={handleClearTrip} className="p-2 text-white hover:text-red-400" title="Clear Saved Trip"><svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button>
                                        </div>
                                    </div>
                                )}
                            </section>
                        ) : (
                            <section className="container mx-auto p-6">
                                <div className="flex justify-between items-center mb-6 initial-hidden card-animation">
                                    <button onClick={handleBackToSearch} className="inline-flex items-center px-4 py-2 border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 transition-colors">
                                        <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                                        New Search
                                    </button>
                                    <button onClick={handleSaveTrip} className={`px-4 py-2 text-sm font-medium rounded-md shadow-sm text-white transition-all ${saveButtonText === 'Trip Saved!' ? 'bg-green-500' : 'bg-blue-600 hover:bg-blue-700'}`}>
                                        {saveButtonText}
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 lg:grid-cols-5 gap-8 items-center initial-hidden card-animation" style={{ animationDelay: '0.1s' }}>
                                    <div className="lg:col-span-3 aspect-video shadow-2xl rounded-xl">
                                       <PhotoGallery images={tripData.images} />
                                    </div>
                                    <div className="lg:col-span-2"><h2 className="text-4xl font-bold">{tripData.name}</h2><p className="text-lg text-gray-700 dark:text-gray-300 mt-4">{tripData.description}</p></div>
                                </div>

                                <div className="mt-8 border-b border-gray-200 dark:border-gray-700 initial-hidden card-animation" style={{ animationDelay: '0.2s' }}>
                                    <nav className="flex -mb-px space-x-2 md:space-x-6">
                                        {['itinerary', 'explore', 'tools', 'info'].map(tab => (
                                            <button key={tab} onClick={() => setActiveTab(tab)} className={`tab-button ${activeTab === tab ? 'active' : ''}`}>{tab.charAt(0).toUpperCase() + tab.slice(1)}</button>
                                        ))}
                                    </nav>
                                </div>
                                
                                <div className="mt-8">
                                    {activeTab === 'itinerary' && (
                                        <div>
                                            <h3 className="text-3xl font-bold mb-6 text-center initial-hidden card-animation" style={{ animationDelay: '0.3s' }}>Your {daysInput}-Day Itinerary</h3>
                                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                                {tripData.itinerary.map((item, index) => (
                                                    <div key={item.day} className={`initial-hidden card-animation colored-card rounded-xl p-6 flex flex-col ${cardColors[index % cardColors.length]}`} style={{ animationDelay: `${0.4 + index * 0.1}s` }}>
                                                        <h4 className="font-bold text-xl text-gray-800 dark:text-white border-b border-black/10 dark:border-white/10 pb-2 mb-3">{item.day}</h4>
                                                        <ul className="space-y-2 list-disc list-inside flex-grow text-gray-700 dark:text-gray-300">{item.activities.map(act => <li key={act}>{act}</li>)}</ul>
                                                        <div className="text-gray-600 dark:text-gray-400">
                                                            <WeatherWidget location={item.day.split(': ')[1]} />
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    )}
                                    {activeTab === 'explore' && (
                                       <div className="space-y-12">
                                            <div className="initial-hidden card-animation" style={{animationDelay: '0.3s'}}><MapComponent places={[...tripData.attractions, ...tripData.restaurants, ...tripData.hiddenGems]} /></div>
                                            
                                            {[{title: 'Top Attractions', data: tripData.attractions}, {title: 'Top Restaurants', data: tripData.restaurants}, {title: 'Hidden Gems', data: tripData.hiddenGems}].map((section, sectionIndex) => (
                                                <div key={section.title}>
                                                    <h3 className="text-3xl font-bold mb-6 text-center initial-hidden card-animation" style={{ animationDelay: `${0.4 + sectionIndex * 0.2}s` }}>{section.title}</h3>
                                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                                        {section.data.map((item, itemIndex) => {
                                                            const avgRating = item.reviews && item.reviews.length > 0 ? (item.reviews.reduce((sum, rev) => sum + rev.rating, 0) / item.reviews.length).toFixed(1) : 0;
                                                            return (
                                                                <div key={item.name} className={`initial-hidden card-animation colored-card rounded-lg p-6 h-full flex flex-col ${cardColors[(itemIndex + sectionIndex*2) % cardColors.length]}`} style={{ animationDelay: `${0.5 + sectionIndex * 0.2 + itemIndex * 0.1}s` }}>
                                                                    <div className="flex items-start space-x-4"><div className="text-4xl">{item.icon || item.type.split(' ')[0]}</div><div className="flex-1"><h4 className="font-bold text-lg text-gray-800 dark:text-white">{item.name}</h4>{item.type && <p className="text-sm font-semibold text-gray-500 dark:text-gray-400">{item.type.split(' ').slice(1).join(' ')}</p>}<p className="mt-1 text-gray-700 dark:text-gray-300">{item.details}</p></div></div>
                                                                    {item.reviews && item.reviews.length > 0 && (<div className="mt-4 pt-4 border-t border-black/10 dark:border-white/10 text-gray-600 dark:text-gray-400 flex items-center gap-2"><StarRating rating={avgRating} /><span className="text-sm font-semibold ">{avgRating}</span><span className="text-sm">({item.reviews.length} reviews)</span></div>)}
                                                                </div>
                                                            )
                                                        })}
                                                    </div>
                                                </div>
                                            ))}
                                            </div>
                                    )}
                                    {activeTab === 'tools' && (
                                        <div className="space-y-12">
                                            <div className="initial-hidden card-animation" style={{ animationDelay: '0.3s' }}><div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg"><h3 className="text-3xl font-bold mb-6 text-center pt-8">Smart Packing Checklist</h3><div className="p-8"><div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">{Object.entries(tripData.packingList).map(([category, items]) => (<div key={category}><h4 className="font-bold text-lg mb-3 text-indigo-700 dark:text-indigo-400">{category}</h4><ul className="space-y-3">{items.map(item => (<li key={item} className="custom-checkbox"><input type="checkbox" id={item.replace(/\s+/g, '-')} /><label htmlFor={item.replace(/\s+/g, '-')}><span className="checkbox-box mr-3"><svg className="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="3"><path strokeLinecap="round" strokeLinejoin="round" d="M5 13l4 4L19 7" /></svg></span><span className="checkbox-label transition-colors">{item}</span></label></li>))}</ul></div>))}</div></div></div></div>
                                            <div className="initial-hidden card-animation" style={{ animationDelay: '0.4s' }}><h3 className="text-3xl font-bold mb-6 text-center">Group Expense Splitter</h3><div className="grid grid-cols-1 md:grid-cols-2 gap-8"><div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"><h4 className="font-bold text-xl mb-4">Add New Expense</h4><div className="space-y-4"><input type="text" value={expenseDesc} onChange={(e) => setExpenseDesc(e.target.value)} placeholder="Expense description" className="w-full p-3 bg-gray-100 dark:bg-gray-800/50 border-gray-300 dark:border-gray-600 border rounded-lg focus:ring-2 focus:ring-indigo-500 transition" /><input type="number" value={expenseAmount} onChange={(e) => setExpenseAmount(e.target.value)} placeholder="Amount (‚Çπ)" min="0" className="w-full p-3 bg-gray-100 dark:bg-gray-800/50 border-gray-300 dark:border-gray-600 border rounded-lg focus:ring-2 focus:ring-indigo-500 transition" /><button onClick={addExpense} className="w-full p-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-semibold transition-colors">Add Expense</button></div></div><div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8"><h4 className="font-bold text-xl mb-4">Expense Summary</h4><div className="mb-4"><label htmlFor="people-count" className="block text-sm font-medium mb-1">Number of People:</label><input type="number" id="people-count" value={numberOfPeople} onChange={e => setNumberOfPeople(Math.max(1, parseInt(e.target.value, 10)))} min="1" className="w-full p-3 bg-gray-100 dark:bg-gray-800/50 border-gray-300 dark:border-gray-600 border rounded-lg focus:ring-2 focus:ring-indigo-500 transition" /></div><ul className="space-y-2 mb-4 h-32 overflow-y-auto pr-2">{expenses.length > 0 ? expenses.map((exp, index) => (<li key={index} className={`flex justify-between items-center p-2 rounded-md ${index % 2 === 0 ? 'bg-gray-50 dark:bg-gray-700/50' : ''}`}><span>{exp.description}</span><div className="flex items-center gap-4"><span className="font-semibold">‚Çπ{exp.amount.toFixed(2)}</span><button onClick={() => deleteExpense(index)} className="text-red-500 hover:text-red-700"><svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></li>)) : <div className="text-center text-gray-500 pt-8">No expenses added yet.</div>}</ul><div className="border-t-2 border-gray-200 dark:border-gray-700 pt-4 space-y-2"><div className="flex justify-between font-bold text-lg"><span>Total:</span> <span>‚Çπ{totalAmount.toFixed(2)}</span></div><div className="flex justify-between font-bold text-lg text-indigo-600 dark:text-indigo-400"><span>Per Person:</span> <span>‚Çπ{perPersonAmount.toFixed(2)}</span></div></div></div></div></div>
                                            <div className="initial-hidden card-animation" style={{ animationDelay: '0.5s' }}><div className="bg-white dark:bg-gray-800 rounded-xl shadow-lg"><h3 className="text-3xl font-bold mb-6 text-center pt-8">Language Helper (Malayalam)</h3><div className="p-8 grid grid-cols-2 md:grid-cols-4 gap-4">{Object.entries(translations).map(([english, malayalam]) => (<div key={english} className="p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg shadow-sm"><p className="font-semibold">{english.charAt(0).toUpperCase() + english.slice(1)}</p><p className="text-indigo-600 dark:text-indigo-400">{malayalam}</p></div>))}</div></div></div>
                                        </div>
                                    )}
                                    {activeTab === 'info' && (
                                        <div className="initial-hidden card-animation" style={{ animationDelay: '0.3s' }}>
                                             <div className="mt-6"><h3 className="text-3xl font-bold mb-6 text-center">Emergency Information</h3><div className="grid grid-cols-2 md:grid-cols-5 gap-4">{Object.entries(tripData.emergencyInfo).map(([service, number]) => { const serviceQuery = { police: 'nearest police station', ambulance: 'nearest hospital', fire: 'nearest fire station', general: 'emergency services', disasterManagement: 'disaster management office' }[service] || 'emergency services'; const mapUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(serviceQuery)}`; return (<a href={mapUrl} target="_blank" rel="noopener noreferrer" key={service} className="block colored-card border-red-200 dark:border-red-800"><div className="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg text-center h-full flex flex-col justify-center"><p className="font-semibold capitalize text-red-800 dark:text-red-200">{service.replace(/([A-Z])/g, ' $1')}</p><p className="text-2xl font-bold text-red-600 dark:text-red-300">{number}</p></div></a>); })}</div></div>
                                        </div>
                                    )}
                                </div>
                            </section>
                        )}
                    </main>
                    <footer className="bg-white dark:bg-gray-800 mt-auto border-t border-gray-200 dark:border-gray-700">
                        <div className="container mx-auto px-6 py-4 text-center text-gray-600 dark:text-gray-400">
                            <p>¬© {new Date().getFullYear()} hack2travel. All rights reserved.</p>
                        </div>
                    </footer>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<App />);
    </script>
</body>
</html>
